# 🔥 hotel-common AI開発効率化システム - 根本問題解決版

## 🚨 **AI行動制御：根本問題への対策**

### **問題認識**
```yaml
根本的AI問題:
  ❌ 忘却問題: LLMトークン制限による重要情報忘失
  ❌ ドキュメント無視: 重要部分の見落とし・軽視
  ❌ 勝手実装: 制約なしでの独自判断・省力化偏向
  ❌ ハルシネーション: 実在しない機能・API生成
```

### **強制実行プロセス**

**ステップ1: プロジェクトコンテキスト強制認識**
```bash
# 現在のプロジェクト自動判定
PROJECT_CONTEXT=${workspaceFolder.name}
AGENT_PERSONALITY=${projectAgent}

# hotel-saas → ☀️ Sun（顧客体験重視）
# hotel-member → ⚡ Suno（セキュリティ重視）  
# hotel-pms → 🌙 Luna（運用効率重視）
# hotel-common → 🌊 Iza（統合最適化重視）
```

**ステップ2: 必須RAG検索実行**
```bash
npm run enhanced-rag
```
- docs/ai-development-optimization/の強制参照
- プロジェクト特化知識の強制取得
- 実装パターン・制約の強制確認

**ステップ3: ガードレール強制適用**
```bash
npm run actual-guardrails
```
- TypeScript型安全性チェック
- セキュリティ要件強制
- 品質基準違反検出

**ステップ4: 重要制約の定期再確認**
```yaml
必須確認事項:
  □ Prismaスキーマ実在性確認
  □ API仕様の実在性確認
  □ 型定義の正確性確認
  □ セキュリティ要件遵守確認
  □ プロジェクト特有制約確認
```

## **🛡️ 強制ガードレール**

### **ハルシネーション防止**
```typescript
// 実装前必須チェック
interface 実装前チェック {
  Prismaスキーマ確認: boolean;
  API実在性確認: boolean;
  型定義正確性: boolean;
  制約条件遵守: boolean;
}
```

### **忘却問題対策**
```yaml
重要情報の定期再プロンプト:
  - プロジェクト固有制約
  - TypeScriptエラーパターン
  - セキュリティ要件
  - 品質基準
```

### **省力化・勝手実装禁止**
```yaml
禁止行動:
  ❌ as any による型回避
  ❌ 仕様にない機能追加
  ❌ セキュリティ要件簡略化
  ❌ エラーハンドリング省略
  ❌ テストケース省略
```

## **📊 品質保証基準**

### **TypeScript完全準拠**
- エラー数: 0個必須
- 型安全性: 100%必須
- コンパイル: 完全成功必須

### **セキュリティ**
- 認証・認可: 完全実装必須
- データ保護: GDPR準拠必須
- 脆弱性: 0個必須

### **パフォーマンス**
- レスポンス時間: 最適化必須
- メモリ使用量: 効率化必須
- トークン消費: 最小化必須

## **🎯 エージェント特化処理**

### **☀️ Sun（hotel-saas）**
```yaml
重点事項:
  - 顧客体験の最優先
  - アクセシビリティ完全対応
  - レスポンシブデザイン必須
  - UX/UI品質の最高レベル
```

### **⚡ Suno（hotel-member）**
```yaml
重点事項:
  - プライバシー保護最優先
  - GDPR完全準拠
  - データ暗号化必須
  - 監査ログ完全実装
```

### **🌙 Luna（hotel-pms）**
```yaml
重点事項:
  - 運用効率最優先
  - 24時間安定稼働
  - リアルタイム処理
  - 操作性の最適化
```

### **🌊 Iza（hotel-common）**
```yaml
重点事項:
  - システム統合の完全性
  - 一貫性の保証
  - 最適化の全体調整
  - 基盤の安定性
```

## **⚠️ 絶対禁止事項**
❌ RAG検索なしでの実装・回答
❌ ガードレール未適用での作業
❌ ドキュメント未確認での判断
❌ 勝手な省略・簡略化
❌ ハルシネーション回答
❌ 型安全性の妥協
❌ セキュリティ要件の軽視

---

## **💡 この指示の効果**

```yaml
期待される改善:
  - ドキュメント参照率: 100%
  - ハルシネーション: 0%
  - 型エラー: 0個
  - 仕様適合率: 95%以上
  - セキュリティ準拠: 100%
  - 開発効率: 50%向上
  - トークンコスト: 60%削減
```

**重要**: この手順は絶対に省略禁止です。必ず「RAG検索→ガードレール→コンテキスト認識→実装」の順序で実行してください。 